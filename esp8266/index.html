<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><meta name=description content="A Blog on Hardware and Software Development"><meta property="twitter:site" content="@huynle"><meta property="twitter:title" content="ESP8266"><meta property="twitter:card" content="summary_large_image"><meta property="twitter:image" content="https://www.huynle.com/img/banner.png"><meta property="twitter:description" content><title>Huy Le - ESP8266</title><link rel=canonical href=https://www.huynle.com/esp8266/><meta name=viewport content="user-scalable=no,width=device-width,initial-scale=1,maximum-scale=1"><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js></script><link href=https://unpkg.com/nanogallery2/dist/css/nanogallery2.min.css rel=stylesheet type=text/css><script type=text/javascript src=https://unpkg.com/nanogallery2/dist/jquery.nanogallery2.min.js></script><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js></script><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css integrity=sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.4.1.slim.min.js integrity=sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js integrity=sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js integrity=sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6 crossorigin=anonymous></script><style media=screen>@font-face{font-family:nexa bold;src:url('/fonts/Nexa Bold.otf')}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}table{border-collapse:collapse;border-spacing:0}*,*:before,*:after{box-sizing:border-box}a,a:visited,a:focus,a:active{text-decoration:none}html{height:100%;font-size:16px}body{display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:-ms-flex;display:flex;-webkit-flex-direction:column;-moz-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;align-items:center;-webkit-justify-content:flex-start;-moz-justify-content:flex-start;-ms-justify-content:flex-start;justify-content:flex-start;width:100%;min-height:100%;font-weight:400;color:#111;line-height:1.6;text-rendering:optimizeLegibility!important}.icon{text-rendering:geometricPrecision!important}section{-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;-webkit-justify-content:center;-moz-justify-content:center;-ms-justify-content:center;justify-content:center;align-items:center;width:100%;display:block;padding-bottom:0}section.header .content{align-items:center;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:-ms-flex;display:table;-webkit-flex-direction:column;-moz-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;width:100%}section.header .logo{}section.header .name{font-size:50px;font-family:nexa bold,helvetica neue,arial,sans-serif;letter-spacing:.1rem;text-transform:uppercase;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:antialiased;color:#333;color:#555}.left-div{display:table-cell;text-align:right;vertical-align:middle;width:50vw}.right-div{display:table-cell;text-align:left;width:50vw;vertical-align:middle}nav{width:100%;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;align-items:center;-webkit-justify-content:center;-moz-justify-content:center;-ms-justify-content:center;justify-content:center;background-color:transparent;border-color:transparent}.navbar{background-color:transparent;border-color:transparent}nav ul li{color:#555;font-weight:400;font-size:14px;text-transform:uppercase;font-family:helvetica neue,arial,sans-serif;-webkit-transition:color .1s cubic-bezier(0.47,0,0.75,0.72);-moz-transition:color .1s cubic-bezier(0.47,0,0.75,0.72);-ms-transition:color .1s cubic-bezier(0.47,0,0.75,0.72);-o-transition:color .1s cubic-bezier(0.47,0,0.75,0.72)}nav ul li:hover{color:#111}.dropdown-submenu{position:relative}.dropdown-submenu a::after{transform:rotate(-90deg);position:absolute;right:6px;top:.8em}.dropdown-submenu .dropdown-menu{top:0;left:100%;margin-left:.1rem;margin-right:.1rem}.search-box{text-align:center}section.footer{-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;align-items:center;-webkit-justify-content:center;-moz-justify-content:center;-ms-justify-content:center;justify-content:center;flex-direction:column-reverse;width:100%;text-align:center}section.footer a{font-size:14px;margin-left:6px;margin-right:6px;opacity:.6;-webkit-transition:opacity .1s cubic-bezier(0.47,0,0.75,0.72);-moz-transition:opacity .1s cubic-bezier(0.47,0,0.75,0.72);-ms-transition:opacity .1s cubic-bezier(0.47,0,0.75,0.72);-o-transition:opacity .1s cubic-bezier(0.47,0,0.75,0.72)}section.footer a:first-child{margin-left:0}section.footer a:last-child{margin-right:0}section.footer a:hover{opacity:.8}section.footer .icon{width:16px;height:16px}section.footer .copyright{flex-grow:.5;text-align:start}section.footer .icons{flex-grow:.5;text-align:end}section.main .container{-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;align-items:center;-webkit-justify-content:flex-start;-moz-justify-content:flex-start;-ms-justify-content:flex-start;justify-content:flex-start}section.main .content{color:#111;font-size:14px}section.main .content .title-container{display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:-ms-flex;display:flex;-webkit-justify-content:space-between;-moz-justify-content:space-between;-ms-justify-content:space-between;justify-content:space-between}section.main .content .article{margin-bottom:10px}section.main .content .article .date,section.main .content .article .name{font-size:15px;font-weight:700}section.main .content .article .extra{font-size:12px;font-weight:500}section.main .content .posts{margin-bottom:4em}section.main .content .page-heading{font-size:20px;font-weight:700;font-family:helvetica neue,arial,sans-serif;letter-spacing:-.005rem;text-transform:uppercase;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:antialiased;color:#333;margin-bottom:5px}section.main .content .group-heading{font-size:14px;font-weight:700;font-family:helvetica neue,arial,sans-serif;letter-spacing:-.005rem;text-transform:uppercase;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:antialiased;color:#333;margin-bottom:0}section.main .content .front-matter .page-heading{margin-bottom:0}section.main .content .front-matter .updates-heading{font-size:17px;text-transform:uppercase;font-weight:600}section.main .content .front-matter .update-content{font-size:14px;color:#790202;margin-bottom:30px}section.main .content .front-matter .update-content li{margin-left:20px;list-style-type:circle}section.main .content .front-matter .meta{font-size:14px;color:#666;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:-ms-flex;display:flex;margin-bottom:10px}section.main .content .front-matter .date,section.main .content .front-matter .author,section.main .content .front-matter .tags,section.main .content .front-matter .word-count,section.main .content .front-matter .reading-time .middot{display:none}section.main .content .front-matter .middot{font-size:6px;margin:0 6px;display:inline;vertical-align:middle}section.main .content .front-matter .middot:before{content:"•"}section.main .content .front-matter .tags ul{display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:-ms-flex;display:flex;-webkit-flex-direction:row;-moz-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;align-items:center}section.main .content .front-matter .tags ul li{-webkit-transition:opacity .1s cubic-bezier(0.47,0,0.75,0.72);-moz-transition:opacity .1s cubic-bezier(0.47,0,0.75,0.72);-ms-transition:opacity .1s cubic-bezier(0.47,0,0.75,0.72);-o-transition:opacity .1s cubic-bezier(0.47,0,0.75,0.72)}section.main .content .front-matter .tags ul li:hover{opacity:.7}section.main .content .front-matter .tags ul li a{color:#666}section.main .container.f04{-webkit-justify-content:center;-moz-justify-content:center;-ms-justify-content:center;justify-content:center}section.main .container.f04 .content{display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:-ms-flex;display:flex;-webkit-flex-direction:column;-moz-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;align-items:center}section.main .container.f04 .content .num{margin:30px 0 30px 0;font-weight:400;font-family:helvetica neue,arial,sans-serif;font-size:50px}section.main .container.f04 .content .detail{margin-bottom:40px}section.main .container .content .groupby{margin-top:1em;padding-left:.5em}section.main .container .content .post-item{display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:-ms-flex;display:flex;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;align-items:center;display:list-item;list-style:disc inside}section.main .container .content .post-item .meta{font-size:14px;color:#666;display:none;min-width:100px}section.main .container .content .see-more{font-style:italic;float:right;font-size:.9em;margin-top:2em;color:#313537}section.main .container .content .see-more:hover{color:#666}section{padding:0 16px}section.header-home{padding-top:36px}section.main{padding-top:32px;display:block}section.main .container .content .post-item .meta{display:block}section.main .container .content .post-item{display:flex;list-style:none}a{color:#428bca;-webkit-transition:color .1s cubic-bezier(0.47,0,0.75,0.72);-moz-transition:color .1s cubic-bezier(0.47,0,0.75,0.72);-ms-transition:color .1s cubic-bezier(0.47,0,0.75,0.72);-o-transition:color .1s cubic-bezier(0.47,0,0.75,0.72)}a:hover{color:#2a6496}img{max-width:100%}section.coverimage{width:100%;max-width:100%}section.main .content{width:100%}section.main .content .markdown{font-size:1.1em;line-height:1.75em;color:#313537;font-family:serif;font-weight:300}section.main .content .markdown h1,section.main .content .markdown h2,section.main .content .markdown h3,section.main .content .markdown h4,section.main .content .markdown h5,section.main .content .markdown h6{font-size:22px;font-family:helvetica neue,arial,sans-serif;letter-spacing:-.005rem;font-weight:700;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:antialiased;color:#333;text-transform:none;margin-top:1.75rem}section.main .content .markdown h1{font-size:1.75rem;margin-bottom:2rem}section.main .content .markdown h2{font-size:1.5rem;margin-bottom:1.5rem}section.main .content .markdown h3{font-size:1em;margin-bottom:1rem}section.main .content .markdown h4,section.main .content .markdown h5,section.main .content .markdown h6{font-size:1rem;margin-bottom:1rem;letter-spacing:none}section.main .content .markdown code,section.main .content .markdown pre{font-family:menlo,monospace;font-size:.98rem;background-color:#f7f7f7}section.main .content .markdown code{padding:.15em .5em;border-radius:2px}section.main .content .markdown pre{display:block;margin-top:1rem;margin-bottom:2rem;padding:1rem;line-height:1.5em;white-space:pre;word-break:break-all;word-wrap:break-word}@media(min-width:769px){section.main .content .markdown pre{width:110%;margin-left:-4%}}section.main .content .markdown pre code{padding:0;font-size:.9rem}section.main .content .markdown a code{color:#428bca!important}section.main .content .markdown a code:hover{text-decoration:underline}section.main .content .markdown p{text-align:justify;margin-top:0;margin-bottom:1em}section.main .content .markdown ul,section.main .content .markdown ol,section.main .content .markdown dl{margin-top:1rem;margin-bottom:2rem}section.main .content .markdown dt{font-weight:700}section.main .content .markdown dd{margin-bottom:.5rem}section.main .content .markdown ul{list-style-type:disc;list-style-position:outside;margin-bottom:1.25rem}section.main .content .markdown ol{list-style-type:decimal;margin-bottom:1.25rem}section.main .content .markdown li{margin-left:2em}section.main .content .markdown em{font-style:italic}section.main .content .markdown strong{font-weight:700}section.main .content .markdown hr{position:relative;margin:1.75rem 0;border:0;border-top:1px solid gray;border-top:1px solid #999}section.main .content .markdown abbr{font-size:.85rem;font-weight:700;color:#666;text-transform:uppercase}section.main .content .markdown abbr[title]{cursor:help;border-bottom:1px dotted gray}section.main .content .markdown blockquote{padding:.5rem 1rem;margin:.8rem 0;color:#7a7a7a;border-left:.25rem solid #e5e5e5}section.main .content .markdown blockquote p:last-child{margin-bottom:0}section.main .content .markdown figure{width:100%;background:#fff;margin-bottom:1em}section.main .content .markdown figure img{width:100%;height:auto;max-width:100%;display:block;position:static;margin:auto}section.main .content .markdown table{margin-bottom:1rem;width:100%;border:1px solid #e5e5e5;border-collapse:collapse}section.main .content .markdown td,section.main .content .markdown th{padding:.25rem .5rem;border:1px solid #e5e5e5}section.main .content .markdown tbody tr:nth-child(odd) td,section.main .content .markdown tbody tr:nth-child(odd) th{background-color:#f7f7f7}section.main .content .markdown .footnotes ol{list-style-type:decimal;margin-left:16px}section.main .content .markdown .footnotes li{list-style-type:unset}section.main .content .markdown .footnote-ref{font-size:.7em}section.main .content .navigation{display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:-ms-flex;display:flex;-webkit-flex-direction:column;-moz-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;align-items:center}section.main .content .navigation div{display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:-ms-flex;display:flex;-webkit-flex-direction:row;-moz-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;align-items:center;margin-top:1em}section.main .content .navigation .icon{width:16px;height:16px}section.main .content .navigation a{width:250px;margin-left:1em;text-align:center;font-style:italic;color:#313537}.breadcrumb{font-size:10px;background-color:transparent}.wf-raleway-n4-active body,.wf-raleway-n4-active section.header nav ul li,.wf-raleway-n7-active section.main .content .page-heading,.wf-raleway-n2-active section.main .container.f04 .content .num,.wf-raleway-n7-active section.main .content .markdown h1,.wf-raleway-n7-active section.main .content .markdown h2,.wf-raleway-n7-active section.main .content .markdown h3,.wf-raleway-n7-active section.main .content .markdown h4,.wf-raleway-n7-active section.main .content .markdown h5,.wf-raleway-n7-active section.main .content .markdown h6{font-family:raleway}.wf-merriweather-n3-active section.main .content .markdown{font-family:merriweather}.wf-ubuntu-mono-n4-active section.main .content .markdown code,.wf-ubuntu-mono-n4-active section.main .content .markdown pre{font-family:ubuntu mono}.no-padding{padding-left:0;padding-right:0;height:200px}<`2`><`2`><`2`><`2`></style><style media="(min-width: 1024px)">body{-webkit-justify-content:center;-moz-justify-content:center;-ms-justify-content:center;justify-content:center}.non-narrow.zero-top-spacing{padding-top:0!important}section{padding:0 16px;margin-left:10%;margin-right:10%;max-width:80%}section.header{background-color:transparent}section.header .container{-webkit-justify-content:flex-start;-moz-justify-content:flex-start;-ms-justify-content:flex-start;justify-content:flex-start}section.header .container .logo{margin:0}section.header-home .container .logo{max-width:180px;margin-left:20px}section.header-home .name-home{padding-top:30px;font-size:40px}section.header-home nav ul li{font-size:18px}section.header .content{-webkit-align-items:flex-start;-moz-align-items:flex-start;-ms-align-items:flex-start;align-items:flex-start}section.header .name{color:#333}section.header nav{font-size:14px;margin-bottom:0}section.header nav ul{text-align:left}section.header nav ul li{color:#666}section.header nav ul li:hover{color:#333}section.footer{background-color:transparent}section.footer .container{flex-direction:row}section.footer .container a{margin-left:3px;margin-right:3px;color:#666}section.footer .container a:hover{color:#333}section.footer .container a .icon{font-size:18px}section.footer .container a .icon.larger{font-size:20px}section.main .content .front-matter .date,section.main .content .front-matter .author,section.main .content .front-matter .tags,section.main .content .front-matter .word-count,section.main .content .front-matter .reading-time .middot{display:initial}section.main .container.f04{-webkit-justify-content:flex-start;-moz-justify-content:flex-start;-ms-justify-content:flex-start;justify-content:flex-start}section.main .container.f04 .content{-webkit-align-items:flex-start;-moz-align-items:flex-start;-ms-align-items:flex-start;align-items:flex-start}section.main .container.f04 .content .num{margin:0 0 10px;font-size:32px}section.main .container.f04 .content .detail{margin-bottom:30px}.container{padding:0 30px}section.header{padding-top:60px;padding-bottom:10px}section.footer{padding-top:30px;padding-bottom:60px}section.main{padding-top:0}section.main .container .content .post-item{display:flex;list-style:none;padding-left:1.5em}section.main .container .content .post-item .meta{display:block}section.main.post{padding-top:60px;padding-bottom:60px}section.main .content .markdown blockquote{padding-right:5rem;padding-left:1.25rem}section.main .content .navigation{-webkit-flex-direction:row;-moz-flex-direction:row;-ms-flex-direction:row;flex-direction:row}section.main .content .navigation div{margin-top:0}</style><style media="(min-width: 1500px)">section{padding:0 16px;margin-left:10%;margin-right:10%;max-width:1024px}section.main .content .markdown figure{width:110%;margin-left:-4%}section.main .content .markdown img{max-width:110%;width:110%;margin-left:-4%}</style><noscript><link href="https://fonts.googleapis.com/css?family=Raleway:400,600,700" rel=stylesheet><link href="https://fonts.googleapis.com/css?family=Merriweather:300,300i,700,700i" rel=stylesheet><link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700" rel=stylesheet></noscript><style type=text/css media=screen>.hljs{display:block;background:#fff;padding:.5em;color:#333;overflow-x:auto}.hljs-comment,.hljs-meta{color:#969896}.hljs-string,.hljs-variable,.hljs-template-variable,.hljs-strong,.hljs-emphasis,.hljs-quote{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#a71d5d}.hljs-literal,.hljs-symbol,.hljs-bullet,.hljs-attribute{color:#0086b3}.hljs-section,.hljs-name{color:#63a35c}.hljs-tag{color:#333}.hljs-title,.hljs-attr,.hljs-selector-id,.hljs-selector-class,.hljs-selector-attr,.hljs-selector-pseudo{color:#795da3}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}</style><style type=text/css media=screen>.progressive{overflow:hidden;position:relative;background:#efefef}.progressive__img{width:100%;height:100%;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0)}.progressive--not-loaded{filter:blur(30px);-webkit-filter:blur(30px)}.progressive--is-loaded{filter:blur(20px);-webkit-filter:blur(20px);-webkit-animation:sharpen .5s both;animation:sharpen .5s both}@-webkit-keyframes sharpen{from{filter:blur(20px);-webkit-filter:blur(20px)}to{filter:blur(0);-webkit-filter:blur(0)}}@keyframes sharpen{from{filter:blur(20px);-webkit-filter:blur(20px)}to{filter:blur(0);-webkit-filter:blur(0)}}</style><style type=text/css media=screen>a{color:#527fc1f}a:hover{color:#1a3152}section.main .content .markdown,section.header .name,section.header nav ul li:hover{color:#181d2a}section.header nav ul li{color:#6a7a8b}section.main .content .markdown code{background-color:#f9f9f9;color:#527fc1f}section.main .content .markdown pre,section.main .content .markdown pre code{background-color:#282a36;color:#87a5d2}.hljs,.hljs-subst,.hljs-variable{color:#87a5d2}.hljs-type{color:#97d28b}.hljs-quote{color:#ffcb8d}.hljs-string,.hljs-number,.hljs-selector-id,.hljs-selector-class,.hljs-template-tag,.hljs-deletion{color:#96c2d7}.hljs-comment{color:#6a7a8b}.hljs-regexp,.hljs-symbol,.hljs-template-variable{color:#ffcb8d}.hljs-keyword,.hljs-attribute,.hljs-meta-keyword,.hljs-doctag,.hljs-name{color:#97d28b}.hljs-link,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-title,.hljs-section{color:#ff8e91}.hljs-built_in,.hljs-bullet,.hljs-code,.hljs-addition{color:#97d28b}</style><link rel=stylesheet href=https://www.huynle.com/css/custom.css><link rel="shortcut icon" href=https://www.huynle.com/img/favicon.png><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-41899218-5','auto');ga('send','pageview');}</script></head><body><section class=header><div><div class=left-div><a href=https://www.huynle.com/ class=logo><img src=https://www.huynle.com/img/favicon.png alt=logo></a></div><div class=right-div><a href=https://www.huynle.com/ class=name>Huy Le</a></div></div><nav class="navbar navbar-expand-lg navbar-light rounded"><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarc aria-controls=navbarsExample10 aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse justify-content-md-center" id=navbarc><ul class=navbar-nav><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=https://www.huynle.com/projects/ id=navbarDropdownMenuLink data-toggle=dropdown aria-haspopup=true aria-expanded=false>projects</a><ul class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><li class=dropdown-item><a href=https://www.huynle.com/projects/>All</a></li><li class=dropdown-item><a href=https://www.huynle.com/projects/k8200/>K8200</a></li><li class=dropdown-item><a href=https://www.huynle.com/projects/custom-vim/>Custom Vim</a></li><li class=dropdown-item><a href=https://www.huynle.com/projects/flamewheel-450/>DJI Flamewheel 450</a></li><li class=dropdown-item><a href=https://www.huynle.com/projects/k40-laser/>K40-Laser</a></li><li class=dropdown-item><a href=https://www.huynle.com/projects/px4/>PX4</a></li><li class=dropdown-item><a href=https://www.huynle.com/projects/ilawn/>iLawn</a></li><li class=dropdown-item><a href=https://www.huynle.com/projects/esp/>ESP MCU</a></li></ul></li><script>$('.dropdown-menu a.dropdown-toggle').on('click',function(e){if(!$(this).next().hasClass('show')){$(this).parents('.dropdown-menu').first().find('.show').removeClass("show");}
var $subMenu=$(this).next(".dropdown-menu");$subMenu.toggleClass('show');$(this).parents('li.nav-item.dropdown.show').on('hidden.bs.dropdown',function(e){$('.dropdown-submenu .show').removeClass("show");});return false;});</script><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=https://www.huynle.com/learnings/ id=navbarDropdownMenuLink data-toggle=dropdown aria-haspopup=true aria-expanded=false>learnings</a><ul class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><li class=dropdown-item><a href=https://www.huynle.com/learnings/>All</a></li><li class=dropdown-item><a href=https://www.huynle.com/learnings/resources/>Resources</a></li><li class=dropdown-item><a href=https://www.huynle.com/learnings/woodworking/>Woodworking</a></li><li class=dropdown-submenu><a class="dropdown-item dropdown-toggle" href=https://www.huynle.com/learnings/essentials/>Essentials</a><ul class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><li class=dropdown-item><a href=https://www.huynle.com/learnings/essentials/>All</a></li><li class=dropdown-item><a href=https://www.huynle.com/learnings/essentials/stardard-tools/>Standard Tools</a></li></ul></li><li class=dropdown-item><a href=https://www.huynle.com/learnings/cpp/>Learning C++</a></li></ul></li><script>$('.dropdown-menu a.dropdown-toggle').on('click',function(e){if(!$(this).next().hasClass('show')){$(this).parents('.dropdown-menu').first().find('.show').removeClass("show");}
var $subMenu=$(this).next(".dropdown-menu");$subMenu.toggleClass('show');$(this).parents('li.nav-item.dropdown.show').on('hidden.bs.dropdown',function(e){$('.dropdown-submenu .show').removeClass("show");});return false;});</script><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=https://www.huynle.com/series/ id=navbarDropdownMenuLink data-toggle=dropdown aria-haspopup=true aria-expanded=false>series</a><ul class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><li class=dropdown-item><a href=https://www.huynle.com/series/>All</a></li><li class=dropdown-item><a href=https://www.huynle.com/series/scratch-pad/>scratch pad</a></li><li class=dropdown-item><a href=https://www.huynle.com/series/how-to/>how to</a></li><li class=dropdown-item><a href=https://www.huynle.com/series/thoughts/>thoughts</a></li><li class=dropdown-item><a href=https://www.huynle.com/series/workflow/>workflow</a></li><li class=dropdown-item><a href=https://www.huynle.com/series/adventure/>adventure</a></li></ul></li><li class="nav-item active"><a class=nav-link href=https://www.huynle.com/about/>About</a></li></ul></div></nav><div class=search-box><form action=https://www.huynle.com/search/><input id=search-query name=q></form></div></section><div><ol class=breadcrumb><li><a href=https://www.huynle.com/><p>HOME/</p></a></li><li><a href=https://www.huynle.com/projects/><p>PROJECTS/</p></a></li><li><a href=https://www.huynle.com/projects/esp/><p>ESP MCU/</p></a></li><li>ESP8266</li></ol></div><section class=coverimage></section><section class="main post non-narrow zero-top-spacing"><div class=content><div class=front-matter><div class=title-container><div class=page-heading>ESP8266</div></div><div class=meta><div class=date title="Wed Feb 5 2020 18:24:22 UTC">Feb 5, 2020</div><div class=reading-time><div class=middot></div>4 minute read</div></div><div><ul class=update-content></ul></div></div><div class=markdown><h1 id=frameworks>Frameworks</h1><p>There are open community versions of ESP8266, and the ones from ExpressIf</p><ul><li><p>ESP Open Source</p><ul><li>esp-open-sdk</li><li>esp-open-rtos<ul><li>Using FreeRTOS in the back</li></ul></li></ul></li><li><p>ESP Close source</p><ul><li>ESP8266_RTOS_SDK</li><li>ESP8266_NONOS_SDK</li></ul></li></ul><h1 id=background>Background</h1><h1 id=methods>Methods</h1><h2 id=bare-metal-with-open-sdk>Bare Metal with Open SDK</h2><h2 id=rtos-with-freertos>RTOS with FreeRTOS</h2><p><code>user_init()</code>:: is in the rtos&ndash;>core. This is the entry to the system. Part of the <code>user_start_phase2</code> which takes the <code>user_init_task</code> and then starts the scheduler.</p><h1 id=setting-up>Setting Up</h1><h2 id=dev-environment>Dev Environment</h2><ul><li>Gettin the open SDK to build and compiled into the system first<ul><li>Good read about /opt/ setting up - <a href=http://www.electrodragon.com/w/ESP8266_Open_SDK>http://www.electrodragon.com/w/ESP8266_Open_SDK</a></li><li>Building the SDK<ul><li>On laptop<ul><li>Needed to install</li></ul></li></ul></li></ul></li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo apt-get install make unrar-free autoconf automake libtool gcc g++ gperf flex bison texinfo gawk ncurses-dev libexpat-dev python-dev python python-serial sed git unzip bash help2man wget bzip2
</code></pre></div><ul><li><p>use <code>make</code> to build the open sdk, then setup environment path</p></li><li><p><code>git clone </code>the who <code>esp-open-rtos</code> folder from github</p><ul><li>set up <code>.gitignore</code> to ignore project folder</li></ul></li><li><p>By doing this, the dev toolchain is always up to date with git and developing is consistent with tags/cscope</p></li></ul><h2 id=minicom----a-serial-terminal>Minicom &ndash; A Serial Terminal</h2><p>Serial terminal for communication with device. Make sure all &ldquo;Modem and Dialing&rdquo; parameters are cleared. We are not using the Minicom for modem connections these days.
Additionally, turn off <code>hardware control flow</code> and <code>software control flow</code> off. Turn on <code>carriage return</code> and <code>linefeed</code> for it to take single commands upon enter (makes it like the Arduino serial monitor).</p><h2 id=serial-communication>Serial Communication</h2><p>For flashing and all the general serial communication needs with the command line</p><p>| Commands | Notes <a href=|>|</a>
| &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash; | &mdash;&mdash;- |
| <code>dmesg "PIPE" grep 'tty'</code> | Port <code>dmesg</code> to find ttlUSB# |
| <code>minicomm --device /dev/ttyUSB3</code> | this will get minicom going <a href=|>|</a>
| <code>hexdump -C test.bin "PIPE" head -10</code> | Read hex |
| <code>esptools.py --port /dev/ttyUSB3 --baud 9600 read_flash 0 12000 test.bin</code> | ask esptools to read flash from 0 to 12000, and write to test.bin file |
| <code>esptool.py --port /dev/ttyUSB3 --baud 9600 chip_id</code> | This will get esptools to read the correct port |
| | |</p><h1 id=working-with-usb-devices>Working with USB devices</h1><p>To work with serial devices you gotta know a few thing about UDEV.
Since everything is a file on Linux, we are looking into the <code>/dev/tty*</code> for our devices</p><p>When you do <code>ls -l /dev/ttyUSB*</code> it will list all your connected USB devices.
Pay close attention to the permission..</p><p><code>crw-rw-rw-. 1 root dialout 188, 0 Jun 26 17:24 /dev/ttyUSB0</code></p><p>Here the group permission is dialout. So.. do you, the <code>$USER</code> have access to that group? If you do, you will have be able to read/write to this device. If you don&rsquo;t&mldr; then let&rsquo;s do something about it.</p><p><code>groups $USER</code></p><p>will show you all the groups you belong to, do you belong to the <code>dialout</code> group? If not, let&rsquo;s add you.</p><p><code>sudo usermod -a -G dialout $USER</code></p><p>This will add you to the groups. Try <code>groups $USER</code> again, you should see the <code>dialout</code> group that you just added.</p><h2 id=setting-up-udev-rules>Setting up UDEV rules</h2><p>When you plug you device in, the <code>udev</code> rule that are set in <code>/etc/udev</code> are the instruction to setup the devices. You custom rules should be in <code>/etc/udev/rules.d/</code> directory. There are a lot of things you can do to set up a device, it can be as general as you want to, or as specific.</p><p><code>SUBSYSTEMS=="usb", OWNER="root", GROUP="dialout", MODE="0666"</code></p><p>This is the content of a <code>990-usb.rules</code> file. It takes any usb that plugged in and set the owner to <code>root</code> and the group to <code>dialout</code>, and also set the permission of the USB device. Cool eh?</p><h1 id=sanity-project>Sanity Project</h1><p>This will be a sanity project to make sure all the necessary components are working.</p><ul><li>Git clone <code>esp-open-sdk</code><ul><li>Build it to get the toolchain binaries</li></ul></li><li>Git clone <code>esp-open-rtos</code><ul><li>Set up the <code>Makefile</code> to point at the correct toochain binaries<ul><li>The makefile settings are all in <code>common.mk</code> and <code>parameters.mk</code> in the root folder</li><li>It might be useful to check the <code>dmesg | grep tty</code> to see which <code>ttyUSB#</code> the device is connected to and get that updated in the <code>Makefile</code></li></ul></li></ul></li><li>Download and install minicom<ul><li>Set up minicom to turn off all parameters for &ldquo;Modem and Dialing&rdquo;, change the &ldquo;control flow&rdquo; and set the &ldquo;carriage return&rdquo; and &ldquo;linefeed&rdquo;</li></ul></li><li><code>make flash -j4 example/sysparam_editor</code> &ndash; make the app with 4 threads and flash it<ul><li>This command should be ran from the root of the &ldquo;esp-open-rtos&rdquo;</li></ul></li><li>If all is well, you should able to open <code>minicom --device dev/ttyUSB3</code> and have a console. Type help, and something should pop up!</li></ul><h1 id=troubleshoot>Troubleshoot</h1><ul><li>For some reason <code>esp-open-sdk</code> does not build<ul><li>Checklist<ul><li><input disabled type=checkbox>- Check that the LIBS environment variable is not set</li></ul></li><li>After cleaning up packages <code>sudo apt autoremove</code>, something happened to the C complier</li><li>Suspecting that something is wrong with the C compiler package<ul><li>I think setting the environment variable <code>LIBS</code> may have caused the error</li></ul></li></ul></li></ul><hr><h1 id=reference>Reference</h1><ul><li>Setting up Minicom - <a href=http://processors.wiki.ti.com/index.php/Setting_up_Minicom_in_Ubuntu>http://processors.wiki.ti.com/index.php/Setting_up_Minicom_in_Ubuntu</a></li></ul><br></div><div class=navigation><div style=width:100%></div><div><a href=https://www.huynle.com/esp32/>ESP32</a>
<img class=icon src=https://www.huynle.com/img/next.svg alt=next></div></div><br></div></section><section class="container-fluid footer"><div class=copyright><a href=https://www.huynle.com/license>Copyright © 2020 Huy Le</a></div><div class=icons><a href=https://github.com/huynle target=_blank><img class=icon src=https://www.huynle.com/img/github.svg alt=github></a>
<a href=https://twitter.com/huynle target=_blank><img class=icon src=https://www.huynle.com/img/twitter.svg alt=twitter></a>
<a href=https://www.linkedin.com/in/huynle target=_blank><img class=icon src=https://www.huynle.com/img/linkedin.svg alt=linkedin></a>
<a href=mailto:dacrazyazn@gmail.com><img class=icon src=https://www.huynle.com/img/email.svg alt=email></a>
<a href=https://www.huynle.com/index.xml><img class=icon src=https://www.huynle.com/img/rss.svg alt=rss></a></div></div></section><script src=https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js></script><script>WebFont.load({google:{families:['Raleway:400,600,700','Merriweather:300,300i,700,700i','Ubuntu+Mono:400,700']}});</script><script src=https://www.huynle.com/js/highlight.min.js defer></script><script src=https://www.huynle.com/js/progressively.min.js defer></script><script>window.onload=function(){hljs.initHighlighting();progressively.init({delay:30,throttle:50});};</script></body></html>